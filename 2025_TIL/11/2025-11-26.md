# TIL Template
날짜: 2025-11-26

## 스크럼
- 학습 목표 1 : Bert 파인튜닝
- 학습 목표 2 : Bert + Llama CPU환경 최적화


## 새로 배운 내용
### 주제 1: Bert 파인튜닝
- **DistiliBert 모델 구조**: BERT의 지식정제를 통해 얻은 모델. 스튜던트 모델의 출력이 티처 모델의 출력과 가까워지도록 학습하는 방법이며, 두 모델의 차이로 인한 정제 손실을 줄여가는 방향으로 학습을 진행한다.
- **DistilBert의 병목구간 확인 코드 작성**: 프로파일링 코드 작성. 구체적인 병목구간(GPU, CPU 메모리 리소스, 각 layer 별 소요시간)을 확인하여 최적화 방식을 정한다. -> Colab에서 CUPTI 라이브러리 제한, GPU 커널 trace가 제한됨. -> 로컬 4060 GPU를 사용하여 병목구간 확인하는 방법으로 진행 예정.
- **DistilBert의 파인튜닝**: 
<img width="300" height="150" alt="image" src="https://github.com/user-attachments/assets/6aab0a81-4ddd-4e3c-9809-5c67c62c3737" />

    파인튜닝 결과
    계획했던 일정이 계속 틀어져서 너무 불안하고 답답해.
    -안정감: 27.7%, 인정: 15.6%, 자율성: 13.5%, 성취: 17.6%, 소속감: 16.8%, 통제감: 40.8%, 유능감: 17.9%, 즐거움: 10.0%, 친밀감: 15.1%, 공정성: 27.0%
    -> 그럴듯 하게 나타나지만, 핵심 욕구만 높게 나오는 것이 아니라, 전체적으로 두루두루 포함됨 -> 욕구별 분리가 명확하지 않아, 신뢰도가 낮다.
    -> 전반적으로 공정성, 친밀감 같은 특정 축은 거의 반응이 없음.
    -> 해당 문장의 핵심은 통제감 상실 + 안정감 결핍 + 불안이지만, 모든 욕구를 다 잡아내지 못한 모습을 보임.

    따라서, 성능을 더 끌어올리는 방향으로 모델개선이 필요하다.



## 오늘의 도전 과제와 해결 방법
- 모델을 최적화하는 다양한 방법을 배우고, CPU 환경에서도 빠른 응답(2초 내)을 할 수 있도록 최적화 한다: 병목현상 확인 -> 병목현상에 맞는 최적화 방법 고안 -> 원리를 직접 확인하고, 적용 -> 성능 확인


## 오늘의 회고
- Colab은 Pytorch의 Tensorboard를 지원하지 않는다는게 반전이었다. 따라서 모델 추론의 병목현상을 확인하는 것은 로컬환경이나, kaggle GPU를 사용하는 방향으로 나아가야 한다.
- 파인튜닝을 했지만 기대한 것 만큼 성능향상이 보이진 않았다. 어떻게 하면 모델을 제어할 수 있을지 뾰족한 수는 현재 없지만, 고려해보아야겠다.
